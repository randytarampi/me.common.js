language: node_js
dist: trusty
node_js:
- '8'
before_install:
- uname -a
- lscpu
- npm install -g npm
- export NODE_ENV=prd;
- git config --global url."https://github.com/".insteadOf ssh://git@github.com/
- git config --global url."https://".insteadOf ssh://
script: npm run travis
before_deploy:
- mkdir -p ../dpl_cd_upload
- tar -zcf ../dpl_cd_upload/me.js.tar.gz -C ./ .
- git config --local user.name "Travis"
- export TRAVIS_AUTHOR=travis@randytarampi.ca
- export COMMIT_AUTHOR=`git --no-pager show -s --format='%ae' \`git rev-parse\``
- git config --local user.email $TRAVIS_AUTHOR
- if [[ "$TRAVIS_COMMIT_MESSAGE" != *"[Travis] Release version"* ]]; then npm version "0.0.0-`date -u +%s`" -m "[Travis] Release version %s"; fi;
deploy:
  provider: releases
  api_key:
    secure: AGGCwIi5mrxMKRcwS6aEG34qvG3lcraxxXTUtyTM+S5Yhwt11LJXFxX6/6/JeMp/ISFfcPC1Vcp1dRq2petMW1Y3lAtiajFhgOPkc7vIxe6YHjEsyUyKABEVCk8iLZoKWa79VcYQEEW2javQDtlpqeT7LKPMe0+9mm/+FHPZqgNAr8xIkqqGHEtnSbH0162P66lDkB8oRwPaGWX7O3IJv2bzJ9yarVBwniBb03NstDjh0aJ0/Mw5+oLfrlIlvHZP4fvxSuBsWNOzUTZiMWNv/FqYZK+AP/03MkIDr5gDSZDn3/5ViC0TW7Z0ZKwVlZJZFvUmM9+n4NsLroIigENJDRxHaqXIR4QZVeIP83QUeS6m+x1hk+NHGKJBveSIiU11zbE/WRDSe9kSnNjjydeF4kgoqknO0V7SpMujGXY11qvBUGyzf6XxPMgUeLuE/10Lw0l9a3MHIeDB2bL3F1dz5ksao6Em2t7cCLqUkcfEuZtjpZE1gtjEqMf8HK0NRz3mPysuP4Umt1482/ZLW8Ze2mWAMp7I7ckmakfOyVLnAe/muQ9DPqBjzxfasus37xR7OacRAdmhRAxM6FjCVDqUopEaR+ctb7S4kOiW3omgzgxIxEp+tD2n1znFUgKuCMGpuDFiYm9hK1W7ofQcGmJCbJ0Q+VcJpml+8Agyirj1GM8=
  file: me.js.tar.gz
  skip_cleanup: true
  on:
    branch: master
    node: 8
after_deploy:
#- git push https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG} HEAD:master;
notifications:
  slack:
    secure: P/44JIYCaFip/qvzLm/UDZr3oRZSvyOVSLopGfF8oO7JY9jeJ9+th/V0h0OelAYPOxDX3AI0oQPmvwBN+PkHbDnCRzre6yRpK+BvB7DGH2hGx0dwRTBPKSCyEWkv3cb8bUy5a91QyRr42l9TQVGcGasFQ17Df5ENMV52rwr3EtT6XInrW5BZvyJdGtaQXBSa7u9ZpHW8/BzOsf3+HrNnH4e/IXL5P8FVKxzxMUlwnaJX0GA3wLZzuFDUV4ISu1FLdrh5KGqFSIOQi8UyfWdnbqKPBHxy4sAdsQA44OeRDnG/yc8oVeJFvZEpYzVCdiTzbruzqmwcGhh73iO6C/pV24Ljcg3EXor08FwHbhSijeVBxNnWKowrrECo+dX5jUxrGauV5k+MajC1Zx+14ZxXCVjo32U/V/f8JNee6U8lFvoSZTx5YKvIhPxrI37inkAyjx020fGeAdfhyv6xpQni6VW7KEhq2tINukVu0G3Z6Zk5r+MTSaLoNSi9f7amAmhc3MufROq3vlEvRQCvIe+X4OSNlpk3hfROqUjx9/3smhZ9e6956r7T341+btX7yRGSZVgMfDzBVq0hUWzq0tmBOWNQNHobqnPTmEOBos9K4YjNW28iqlQjOMckxpLJnSWmVRDR5fu90aUAwiBcj64hJRnnZxpKz9C215NC3EzQt+Y=
env:
  global:
    secure: uWtcvhEtoFu9taMyQJH7peJlZlEDrjuOvGsUWpOnWemgrk2b/7vKuKf07+5jW9TKtFU14wSiFZxAqhRN6qDb1Tx0qObU+To0tLp8jyoR+DlA8Xfmjs/Qtf4tfNIFrxeYZIqmKfjX/YEtPBJMcduxmPHyIsK/281jLCudRCRfsgjFy3LxoF6tPCMT2ioojILncxy/jPjTMzRzIe5LuvoO1mlwCyiYvZUQU5DhFA+A6SDlyVTpeydzEtw7p7tL/DtBlq8WIQx91jCauUXoCdgsEbpqqMehRl9AfufUoA8x4zNjoHAmjLipDLh8rYLClvADsW5v5q6uv20qM7Gtdee3nOU1TUbzrwvneRow65Nnan41WhVpbmH1/6HQoEVARQCurzBeidXMgVrhj41dx2Rhr7+2tnDZc6F2/UyOKegGiVEqCPx2HUy7iVAd6iuW8NJiJjL5E/IqmOKcGLlz/IIzKtvJv0itZ3CP1lyWWwZwpQk62d7nl/iGol7hr1lC5d52CmIojR1mgh3PuM5LNIVqiSuPxDRSqhtz95zO/0Adhalx/7mseg5xFDwsSLRAH76R/jr7ASMtAoqIPprE9rKn+GItndQKBOjr/qFD5k8NIn8l752hIee+NDxE+63iUGrghL0DNm4cCc8X8ETmW4HsjMzJfmzuFEsdhA44qaBDloM=
